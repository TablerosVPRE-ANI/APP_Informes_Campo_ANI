<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#004884">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <title>ANI Campo - Canal del Dique</title>
</head>
<body>
    <div class="header">
        <div>
            <strong>ANI Campo</strong>
            <div style="font-size: 12px;">Canal del Dique - Cartagena</div>
        </div>
        <div>
            <span class="status-indicator" id="connectionStatus"></span>
            <span id="connectionText" style="font-size: 12px;"></span>
        </div>
    </div>

    <div id="syncStatus" class="sync-status" style="display: none;"></div>

<!-- Secci贸n Informaci贸n B谩sica -->
<div id="infoBasica" class="section active">
    <div class="form-section">
        <div class="form-title"> Informaci贸n B谩sica</div>
        
        <!-- AGREGAR ESTA NUEVA SECCIN DE PERFIL GIT -->
        <div style="background: #f0f8ff; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 2px solid #004884;">
            <label style="font-weight: bold; color: #004884; display: block; margin-bottom: 10px;">
                Seleccione su Grupo Interno de Trabajo (GIT) *
            </label>
            <select id="perfilGIT" required style="background: white; font-size: 16px; padding: 12px;">
                <option value="">-- Seleccionar GIT --</option>
                <option value="social">GIT Social</option>
                <option value="predial">GIT Predial</option>
                <option value="juridico_predial">GIT Jur铆dico Predial</option>
                <option value="ambiental">GIT Ambiental</option>
                <option value="riesgos">GIT Riesgos</option>
            </select>
        </div>
        
        <label style="font-size: 13px; color: #666; margin-bottom: 5px; display: block;">
            Nombre del funcionario *
        </label>
        <input type="text" id="nombreFuncionario" placeholder="Nombre completo" required>
        
        <label style="font-size: 13px; color: #666; margin-bottom: 5px; display: block;">
            Lugar espec铆fico *
        </label>
        <input type="text" id="lugar" placeholder="Lugar espec铆fico en Cartagena" value="Cartagena" required>
        
        <input type="date" id="fechaSalida" required>
        <input type="date" id="fechaRegreso" required>
        <textarea id="objeto" placeholder="Objeto del desplazamiento *" required></textarea>
        <input type="text" id="participantes" placeholder="Otros participantes (separar con comas)">
    </div>
</div>

<!-- Secci贸n Actividades -->
<div id="actividades" class="section">
    <div class="form-section">
        <div class="form-title"> Registrar Actividad</div>
        <input type="text" id="actividadTitulo" placeholder="T铆tulo de la actividad">
        <input type="datetime-local" id="actividadFecha">
        <textarea id="actividadDescripcion" placeholder="Descripci贸n detallada"></textarea>
        
        <!-- ACTUALIZAR ESTA PARTE -->
        <div style="margin: 10px 0;">
            <label style="font-size: 14px; color: #666; display: block; margin-bottom: 8px;">
                 Agregar evidencias (fotos)
            </label>
            <input type="file" 
                   id="actividadFoto" 
                   accept="image/*" 
                   multiple
                   style="width: 100%; padding: 10px; border: 2px dashed #004884; border-radius: 6px; background: #f0f8ff;">
        </div>
        <p style="font-size: 12px; color: #666; margin: 5px 0;">
            Toca para seleccionar de galer铆a o tomar foto nueva
        </p>
        
        <button class="btn btn-primary" onclick="guardarActividad()">Agregar Actividad</button>
    </div>
    <div id="listaActividades"></div>
</div>

    <!-- Secci贸n Compromisos -->
    <div id="compromisos" class="section">
        <div class="form-section">
            <div class="form-title"> Nuevo Compromiso</div>
            <input type="text" id="compromisoDescripcion" placeholder="Descripci贸n del compromiso">
            <select id="compromisoResponsable">
                <option value="">Seleccionar responsable...</option>
                <option value="ANI">ANI</option>
                <option value="Concesionario">Concesionario</option>
                <option value="Interventor铆a">Interventor铆a</option>
                <option value="Alcald铆a">Alcald铆a</option>
                <option value="Gobernaci贸n">Gobernaci贸n</option>
                <option value="Comunidad">Comunidad</option>
                <option value="Ministerio">Ministerio</option>
            </select>
            <input type="date" id="compromisoFecha">
            <select id="compromisoPrioridad">
                <option value="alta">Prioridad Alta</option>
                <option value="media">Prioridad Media</option>
                <option value="baja">Prioridad Baja</option>
            </select>
            <button class="btn btn-primary" onclick="guardarCompromiso()">Agregar Compromiso</button>
        </div>
        <div id="listaCompromisos"></div>
    </div>

    <!-- Secci贸n Guardar -->
    <div id="guardar" class="section">
        <div class="form-section">
            <div class="form-title"> Opciones de Guardado</div>
            <div id="resumen"></div>
            <button class="btn btn-success" onclick="guardarInforme()"> Guardar Localmente</button>
            <button class="btn btn-primary" onclick="sincronizar()">锔 Sincronizar</button>
            <button class="btn btn-secondary" onclick="exportarJSON()"> Descargar JSON</button>
        </div>
    </div>

<!-- Men煤 flotante -->
<div class="floating-menu">
    <button class="menu-btn active" onclick="cambiarSeccion('infoBasica', this)">
        <span style="font-size: 24px;"></span>
        <span>Info</span>
    </button>
    <button class="menu-btn" onclick="cambiarSeccion('actividades', this)">
        <span style="font-size: 24px;"></span>
        <span>Actividades</span>
    </button>
    <button class="menu-btn" onclick="cambiarSeccion('compromisos', this)">
        <span style="font-size: 24px;"></span>
        <span>Compromisos</span>
    </button>
    <button class="menu-btn" onclick="cambiarSeccion('guardar', this)">
        <span style="font-size: 24px;"></span>
        <span>Guardar</span>
    </button>
</div>
<!-- Agregar ANTES de <script src="app.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
</body>

</html>


